<section data-ng-controller="MessagesController" data-ng-init="findOne()">
  <form name="messageForm" class="form-horizontal col-md-10" role="form" data-ng-submit="update(messageForm.$valid)" novalidate>
    <div class="form-group" ng-class="{ 'has-error' : submitted && messageForm.subject.$invalid }">
      <label mean-token="'edit-subject'" for="subject" class="col-md-3 control-label">Title</label>
      <div class="col-md-9">
        <input name="subject" type="text" class="form-control" data-ng-model="message.subject" id="subject" placeholder="Subject" required>
        <div ng-show="submitted && messageForm.subject.$invalid" class="help-block">
          <p ng-show="messageForm.subject.$error.required">Subject is required</p>
        </div>
      </div>
    </div>
      
      
    <div class="form-group">
      <label class="col-md-3 control-label">Site ID</label>
      <div class="col-md-9">
        <input name="siteId" type="text" class="form-control" data-ng-model="message.siteId" id="siteId" placeholder="Site ID (1123-1415)" required>
      </div>
    </div>  
      
    <div class="form-group">
      <label class="col-md-3 control-label">Site Title</label>
      <div class="col-md-9">
        <input name="siteTitle" type="text" class="form-control" data-ng-model="message.siteTitle" id="siteTitle" placeholder="Site Title" required>
      </div>
    </div>

    <div class="form-group" ng-class="{ 'has-error' : submitted && messageForm.author.$invalid }">
      <label class="col-md-3 control-label">Author</label>
      <div class="col-md-9">
        <input name="author" type="text" class="form-control" data-ng-model="message.author" id="author" placeholder="Author Name" required>
        <div ng-show="submitted && messageForm.author.$invalid" class="help-block">
          <p ng-show="messageForm.author.$error.required">Author is required</p>
        </div>
      </div>
    </div>        
        
   <div class="form-group">
       
      <label class="col-md-3 control-label">Notification URL</label>
      <div class="col-md-9">
        <input name="notiURL" type="text" class="form-control" data-ng-model="message.notiURL" id="notiURL" placeholder="Notification URL" required>
      </div>
    </div>   
    
    <div class="form-group" ng-class="{ 'has-error' : submitted && messageForm.newrcp.$invalid }">
      
        <label class="col-md-3 control-label">Recipients</label>
        <ul ng-show="message.receptientsIds.length > 0" class="col-md-9 rcplist">
          <li  ng-repeat="rcp in message.receptientsIds" >{{rcp}}
            <a class="btn" data-ng-click="message.receptientsIds.splice($index,1)">
                <i class="glyphicon glyphicon-remove"></i>
            </a>
          </li>
        </ul> 
       
        <label ng-show="message.receptientsIds.length > 0" class="col-md-3 control-label"><span data-ng-hide="true">Receptients List</span></label>
        <div class="col-md-4">
            <input name="newrcp" type="text" class="form-control" data-ng-model="newrcp" id="newrcp" placeholder="Receptient id"  ng-required="tempReceptients.length == 0">
            <div ng-show="submitted && messageForm.newrcp.$invalid" class="help-block">
                <p ng-show="messageForm.newrcp.$error.required">Recipients are required</p>
            </div>
        </div>
        <div class="col-md-5">
            <a class="btn" data-ng-click="addRcpToMsg()">
                <i class="glyphicon glyphicon-plus"></i>
           </a>        
        </div>
       
    </div>        
        
    <div class="form-group" ng-class="{ 'has-error' : submitted && messageForm.content.$invalid }">
      <label mean-token="'edit-content'" for="content" class="col-md-3 control-label">Content</label>
      <div class="col-md-9">
        <text-angular name="content" data-ng-model="message.content" id="content"  required></text-angular>
        <div ng-show="submitted && messageForm.content.$invalid" class="help-block">
          <p ng-show="messageForm.content.$error.required">Content is required</p>
        </div>
      </div>
    </div>
    <div class="form-group">
      <div class="col-md-offset-2 col-md-10">
        <button mean-token="'edit-submit'" type="submit" class="btn btn-default">Submit</button>
      </div>
    </div>
  </form>
</section>
